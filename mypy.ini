[tool.mypy]
python_version = "3.10"
warn_return_any = true
warn_unused_configs = true
disallow_untyped_defs = false  # 逐步启用
check_untyped_defs = true
warn_redundant_casts = true
warn_unused_ignores = true
warn_no_return = true
warn_unreachable = true
strict_optional = true

# 核心模块启用严格模式
[[tool.mypy.overrides]]
module = "cy_llm.worker.core.*"
disallow_untyped_defs = true
disallow_any_generics = true

[[tool.mypy.overrides]]
module = "cy_llm.worker.engines.*"
disallow_untyped_defs = true

# 忽略第三方库
[[tool.mypy.overrides]]
module = [
    "vllm.*",
    "transformers.*",
    "torch.*",
    "grpc.*",
    "google.protobuf.*",
]
ignore_missing_imports = true
