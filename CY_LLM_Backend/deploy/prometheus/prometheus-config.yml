# =============================================================================
# Prometheus 监控配置
# 用于 prometheus.yml 的 scrape 配置
# =============================================================================

# 添加到 prometheus.yml 的 scrape_configs 部分:
rule_files:
  - /etc/prometheus/rules/cy-llm-alerts.yml

scrape_configs:
  - job_name: 'cy-llm-gateway'
    metrics_path: '/actuator/prometheus'
    static_configs:
      - targets: ['gateway:8080']
    # 如果启用了认证
    # basic_auth:
    #   username: prometheus
    #   password: ${PROMETHEUS_PASSWORD}

  - job_name: 'cy-llm-worker-nvidia'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['worker-nvidia:9090']
  - job_name: 'cy-llm-worker-ascend'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['worker-ascend:9090']
  - job_name: 'cy-llm-coordinator'
    metrics_path: '/actuator/prometheus'
    static_configs:
      - targets: ['coordinator:8081']

alerting:
  alertmanagers:
    - static_configs:
        - targets: ['alertmanager:9093']
